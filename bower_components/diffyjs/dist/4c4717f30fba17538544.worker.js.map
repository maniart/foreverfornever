{"version":3,"sources":["webpack:///4c4717f30fba17538544.worker.js","webpack:///webpack/bootstrap 4c4717f30fba17538544","webpack:///./src/worker.js","webpack:///./src/utils.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_utils","pixelData","average1","average2","delta","actualSensitivity","createDiffBuffer","_ref","_ref$data","data","buffer","data1","data2","width","height","sensitivity","threshold","i","Uint32Array","y","x","polarize","abs","postMessage","onmessage","Object","defineProperty","value","createOnceLog","counter","_console","console","log","apply","arguments","$","selector","document","querySelector","round","number"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,IAGAV,EAAA,KDMM,SAASI,EAAQD,EAASH,GAE/B,YE9CD,IAAAW,GAAAX,EAAA,GAEIY,SACAC,SACAC,SACAC,SACAC,SAEEC,EAAmB,SAAAC,GAA8E,GAAAC,GAAAD,EAA3EE,KAAQC,EAAmEF,EAAnEE,OAAQC,EAA2DH,EAA3DG,MAAOC,EAAoDJ,EAApDI,MAAOC,EAA6CL,EAA7CK,MAAOC,EAAsCN,EAAtCM,OAAQC,EAA8BP,EAA9BO,YAAaC,EAAiBR,EAAjBQ,UAChFC,EAAI,CACRZ,GAAoB,EAAIU,EAExBd,EAAY,GAAIiB,aAAYR,EAC5B,KAAK,GAAIS,GAAI,EAAGA,EAAIL,IAAWK,EAC7B,IAAK,GAAIC,GAAI,EAAGA,EAAIP,IAAUO,EAC5BH,EAAIE,EAAIN,EAAQO,EAChBlB,GAAaS,EAAU,EAAJM,GAASN,EAAU,EAAJM,EAAQ,GAAKN,EAAU,EAAJM,EAAQ,IAAM,EAAKZ,EACxEF,GAAaS,EAAU,EAAJK,GAASL,EAAU,EAAJK,EAAQ,GAAKL,EAAU,EAAJK,EAAQ,IAAM,EAAKZ,EACxED,GAAQ,EAAAJ,EAAAqB,WACN,EAAArB,EAAAsB,KAAIpB,EAAWC,GAAWa,GAE5Bf,EAAUgB,GACP,KAAS,GACTb,GAAS,GACTA,GAAU,EACVA,CAIPmB,aAAYb,GAGdc,WAAYlB,GF0DN,SAASb,EAAQD,GAEtB,YAEAiC,QAAOC,eAAelC,EAAS,cAC7BmC,OAAO,GGzFGC,iBAAgB,WAC3B,GAAIC,GAAU,CACd,OAAO,YACL,GAAGA,EAAU,EAAG,IAAAC,IACdA,EAAAC,SAAQC,IAARC,MAAAH,EAAeI,WAEjBL,MAOSM,IAAI,SAACC,GAAD,MAAcC,UAASC,cAAcF,IAKzCG,QAAQ,SAACC,GAAD,MAAaA,GAAS,IAAO,GAKrClB,MAAM,SAACK,GAAD,OAAYA,EAASA,GAAS,KAAQA,GAAS,KAMrDN,WAAW,SAACM,EAAOX,GAAR,MAAuBW,GAAQX,EAAa,EAAO","file":"4c4717f30fba17538544.worker.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(1);\n\t\n\tvar pixelData = void 0;\n\tvar average1 = void 0;\n\tvar average2 = void 0;\n\tvar delta = void 0;\n\tvar actualSensitivity = void 0;\n\t\n\tvar createDiffBuffer = function createDiffBuffer(_ref) {\n\t  var _ref$data = _ref.data,\n\t      buffer = _ref$data.buffer,\n\t      data1 = _ref$data.data1,\n\t      data2 = _ref$data.data2,\n\t      width = _ref$data.width,\n\t      height = _ref$data.height,\n\t      sensitivity = _ref$data.sensitivity,\n\t      threshold = _ref$data.threshold;\n\t\n\t  var i = 0;\n\t  actualSensitivity = 1 - sensitivity;\n\t\n\t  pixelData = new Uint32Array(buffer);\n\t  for (var y = 0; y < height; ++y) {\n\t    for (var x = 0; x < width; ++x) {\n\t      i = y * width + x;\n\t      average1 = (data1[i * 4] + data1[i * 4 + 1] + data1[i * 4 + 2]) / 3 / actualSensitivity;\n\t      average2 = (data2[i * 4] + data2[i * 4 + 1] + data2[i * 4 + 2]) / 3 / actualSensitivity;\n\t      delta = (0, _utils.polarize)((0, _utils.abs)(average1 - average2), threshold);\n\t      pixelData[i] = 255 << 24 | // alpha\n\t      delta << 16 | // blue\n\t      delta << 8 | // green\n\t      delta; // red\n\t    }\n\t  }\n\t\n\t  postMessage(buffer);\n\t};\n\t\n\tonmessage = createDiffBuffer;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/* eslint-disable no-console */\n\t\n\t/*\n\t  utility function to log only once\n\t  useful for logging in loops\n\t*/\n\tvar createOnceLog = exports.createOnceLog = function createOnceLog() {\n\t  var counter = 0;\n\t  return function onceLog() {\n\t    if (counter < 1) {\n\t      var _console;\n\t\n\t      (_console = console).log.apply(_console, arguments);\n\t    }\n\t    counter++;\n\t  };\n\t};\n\t\n\t/*\n\t  utility function to access DOM references\n\t*/\n\tvar $ = exports.$ = function $(selector) {\n\t  return document.querySelector(selector);\n\t};\n\t\n\t/*\n\t  bitwise Math.round\n\t*/\n\tvar round = exports.round = function round(number) {\n\t  return number + .5 >> 0;\n\t};\n\t\n\t/*\n\t  butwise Math.abs\n\t*/\n\tvar abs = exports.abs = function abs(value) {\n\t  return (value ^ value >> 31) - (value >> 31);\n\t};\n\t\n\t/*\n\t  polarize pixel values based on value and threshold\n\t*/\n\tvar polarize = exports.polarize = function polarize(value, threshold) {\n\t  return value > threshold ? 0x00 : 0XFF;\n\t};\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// 4c4717f30fba17538544.worker.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4c4717f30fba17538544","import { abs, polarize } from './utils';\n\nlet pixelData;\nlet average1;\nlet average2;\nlet delta;\nlet actualSensitivity;\n\nconst createDiffBuffer = ({ data: { buffer, data1, data2, width, height, sensitivity, threshold }}) => {\n  let i = 0;\n  actualSensitivity = 1 - sensitivity;\n\n  pixelData = new Uint32Array(buffer);\n  for (let y = 0; y < height; ++ y) {\n    for (let x = 0; x < width; ++ x) {\n      i = y * width + x;\n      average1 = ((data1[i * 4] + data1[i * 4 + 1] + data1[i * 4 + 2]) / 3) / actualSensitivity;\n      average2 = ((data2[i * 4] + data2[i * 4 + 1] + data2[i * 4 + 2]) / 3) / actualSensitivity;\n      delta = polarize(\n        abs(average1 - average2), threshold\n      );\n      pixelData[i] =\n        (255   << 24) |     // alpha\n        (delta << 16) |     // blue\n        (delta <<  8) |     // green\n         delta;             // red\n    }\n  }\n\n  postMessage(buffer);\n};\n\nonmessage = createDiffBuffer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/worker.js","/* eslint-disable no-console */\n\n/*\n  utility function to log only once\n  useful for logging in loops\n*/\nexport const createOnceLog = () => {\n  let counter = 0;\n  return function onceLog() {\n    if(counter < 1) {\n      console.log(...arguments);\n    }\n    counter ++;\n  }\n}\n\n/*\n  utility function to access DOM references\n*/\nexport const $ = (selector) => document.querySelector(selector);\n\n/*\n  bitwise Math.round\n*/\nexport const round = (number) => (number + .5) >> 0;\n\n/*\n  butwise Math.abs\n*/\nexport const abs = (value) => (value ^ (value >> 31)) - (value >> 31);\n\n\n/*\n  polarize pixel values based on value and threshold\n*/\nexport const polarize = (value, threshold) => (value > threshold) ? 0x00 : 0XFF;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js"],"sourceRoot":""}